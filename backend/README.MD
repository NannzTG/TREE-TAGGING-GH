# ğŸŒ³ Tree Logging System Backend

This folder contains the FastAPI backend for the 3T Tree Logging System.

## ğŸš€ Features
- REST API for managing tree and seed records
- QR scan endpoint: `/scan/{tree_id}`
- KoboToolbox sync endpoint: `/sync-kobo`
- Sync logging via `synclog` table
- MySQL database integration
- HTML rendering via Jinja2 templates

## ğŸ“ Folder Structure
```
backend/
â”œâ”€â”€ main.py                  # FastAPI app entry point
â”œâ”€â”€ models.py                # SQLAlchemy models
â”œâ”€â”€ schemas.py               # Pydantic schemas
â”œâ”€â”€ crud.py                  # Database operations
â”œâ”€â”€ kobo_sync_script.py      # Kobo sync logic
â”œâ”€â”€ database.py              # DB engine and session setup
â”œâ”€â”€ requirements.txt         # Backend dependencies
â”œâ”€â”€ templates/               # HTML templates
â”‚   â””â”€â”€ tree_detail.html     # Tree scan view
â”œâ”€â”€ static/
â”‚   â””â”€â”€ qrcodes/             # QR code images
```

## âš™ï¸ Setup Instructions
```bash
cd backend
pip install -r requirements.txt
uvicorn main:app --reload
```

## ğŸ” Environment Variables
Set these in Railway or a `.env` file:
```
KOBO_TOKEN=your_kobo_token
TREE_FORM_ID=tree_form_id
SEED_FORM_ID=seed_form_id
DB_HOST=your_db_host
DB_PORT=3306
DB_USER=root
DB_PASSWORD=your_password
DB_NAME=railway
```

## â˜ï¸ Deployment
- Hosted on Railway
- Cron job runs `kobo_sync_script.py` hourly
- Sync can also be triggered via `/sync-kobo`

## ğŸ“„ License
MIT License
